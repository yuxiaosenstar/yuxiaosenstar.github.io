(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7063bf50"],{"1cc1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("d4ec"),o=n("bee2"),a=window.location.protocol+"//"+window.location.host+"/ays-adi-web-service",r=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"getEnv",value:function(){return window.location.host.indexOf("localhost")>-1?"dev":"default"}},{key:"getTemplateUrl",value:function(){var t=e.getEnv();return"dev"===t?window.location.protocol+"//"+window.location.host:"default"===t?window.location.protocol+"//"+window.location.host+"/ays-adi-web-service":window.location.protocol+"//"+window.location.host+"/ays-adi-web-service/"+t}},{key:"getRemoteBaseUrl",value:function(){return"dev"===e.getEnv()?"https://daojia-uat.aiyingshi.net.cn:10443/ays-adi-web-service":a}},{key:"skipPermission",value:function(){return"dev"===this.getEnv()}}]),e}()},"4bb5":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n("2fe1"),o=n("2f62"),a=s("computed",o.e),r=(s("computed",o.c),s("methods",o.b));s("methods",o.d);function s(e,t){function n(n,o){return Object(i.a)((function(i,a){i[e]||(i[e]={});var r,s=((r={})[a]=n,r);i[e][a]=void 0!==o?t(o,s)[a]:t(s)[a]}))}return function(e,t){if("string"==typeof t){var i=t,o=e;return n(i,void 0)(o,i)}return n(e,function(e){var t=e&&e.namespace;if("string"!=typeof t)return;if("/"!==t[t.length-1])return t+"/";return t}(t))}}},"64f7":function(e,t,n){"use strict";n("9270")},7101:function(e,t,n){"use strict";n.r(t);var i,o=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-app-body-left"},[t("img",{attrs:{src:n("a497")}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-app-body-right-header"},[t("img",{attrs:{src:n("e581")}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-footer"},[t("div",[this._v("Copyright © 2021 爱婴室")]),t("div",[this._v("上海海鼎提供技术支持")])])}],a=n("d4ec"),r=n("bee2"),s=n("262e"),c=n("2caf"),l=(n("99af"),n("d3b7"),n("9ab4")),u=n("77a6"),d=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"getCaptchaCode",value:function(){return u.a.server().get("/web/authentication/",{}).then((function(e){return e.data}))}},{key:"login",value:function(e){return u.a.server().post("/web/authentication/login",e,{}).then((function(e){return e.data}))}}]),e}(),f=n("1b40"),p=n("4bb5"),g=function e(){Object(a.a)(this,e),this.loginId=null,this.password=null,this.captcha=null,this.requestId=null},h=n("1cc1");!function(e){e.loginId="请输入账户信息",e.password="请输入登录密码",e.captcha="请输入验证码"}(i||(i={}));var v=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.apply(this,arguments)).fetchImage="",e.loginModel=new g,e.isloading=!1,e.tips="",e.redirect="",e.rules={loginId:[{validator:e.validateloginId,trigger:"blur"}],password:[{validator:e.validatePass,trigger:"blur"}],captcha:[{validator:e.validateCaptcha,trigger:"blur"}]},e}return Object(r.a)(n,[{key:"validateloginId",value:function(e,t,n){t?(this.tips="",n()):(this.tips=i.loginId,n(new Error))}},{key:"validatePass",value:function(e,t,n){t?(this.tips="",n()):(this.tips=i.password,n(new Error))}},{key:"validateCaptcha",value:function(e,t,n){t?(this.tips="",n()):(this.tips=i.captcha,n(new Error))}},{key:"mounted",value:function(){this.doFetchImage()}},{key:"onRouteChange",value:function(e){var t=e.query;t&&(this.redirect=t.redirect)}},{key:"checkRequiredField",value:function(){return this.loginModel.loginId?this.loginModel.password?this.loginModel.captcha?(this.tips="",!0):(this.tips=i.captcha,!1):(this.tips=i.password,!1):(this.tips=i.loginId,!1)}},{key:"doFetchImage",value:function(){var e=h.a.getRemoteBaseUrl();this.loginModel.requestId=String((new Date).getTime()),this.loginModel.captcha="",this.fetchImage="".concat(e,"/web/authentication/captcha?requestId=").concat(this.loginModel.requestId)}},{key:"doLogin",value:function(){var e=this;this.checkRequiredField()&&(this.isloading=!0,d.login(this.loginModel).then((function(t){var n=t;e.actionUserInfo(n),e.$router.push({path:e.redirect||"/"}),e.$message.success("登录成功！")})).catch((function(t){e.tips=t.message,e.doFetchImage()})).finally((function(){e.isloading=!1})))}}]),n}(f.d);Object(l.a)([Object(p.a)("userInfo")],v.prototype,"actionUserInfo",void 0),Object(l.a)([Object(f.e)("$route")],v.prototype,"onRouteChange",null);var m=v=Object(l.a)([Object(f.a)({components:{}})],v),b=(n("64f7"),n("2877")),y=Object(b.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("div",{staticClass:"login-app"},[n("div",{staticClass:"login-app-body"},[e._m(0),n("div",{staticClass:"login-app-body-right"},[e._m(1),n("div",{staticClass:"login-title"},[e._v("欢迎使用财务凭证对接工具")]),n("el-form",{staticClass:"login-form",attrs:{"show-message":!1,rules:e.rules,model:e.loginModel,"label-width":"0"}},[n("el-form-item",{attrs:{prop:"loginId"}},[n("el-input",{attrs:{"prefix-icon":"iconfont ic-ui-user",placeholder:"请输入账户名"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},model:{value:e.loginModel.loginId,callback:function(t){e.$set(e.loginModel,"loginId",t)},expression:"loginModel.loginId"}})],1),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{"prefix-icon":"iconfont ic-ui-lock",placeholder:"请输入登录密码",type:"password"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},model:{value:e.loginModel.password,callback:function(t){e.$set(e.loginModel,"password",t)},expression:"loginModel.password"}})],1),n("el-form-item",{attrs:{prop:"captcha"}},[n("el-input",{attrs:{placeholder:"请输入验证码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)}},scopedSlots:e._u([{key:"suffix",fn:function(){return[n("img",{staticClass:"login-form-checkCode",attrs:{src:e.fetchImage},on:{click:e.doFetchImage}})]},proxy:!0}]),model:{value:e.loginModel.captcha,callback:function(t){e.$set(e.loginModel,"captcha",t)},expression:"loginModel.captcha"}})],1),n("span",{staticClass:"login-form-tips"},[e._v(e._s(e.tips))]),n("el-form-item",[n("el-button",{staticClass:"login-form-button",attrs:{loading:e.isloading,type:"primary"},on:{click:e.doLogin}},[e._v("登 录 ")])],1)],1)],1)])]),e._m(2)])}),o,!1,null,"60ef6b96",null);t.default=y.exports},"77a6":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var i=n("d4ec"),o=n("bee2"),a=(n("d3b7"),n("c19f"),n("bc3a")),r=n.n(a),s=n("9143"),c=n("1cc1"),l=n("0613"),u=n("4328");r.a.defaults.paramsSerializer=function(e){return u.stringify(e,{arrayFormat:"repeat"})},r.a.defaults.timeout=6e4;c.a.getEnv();var d=c.a.getRemoteBaseUrl(),f=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"file",value:function(e){return r.a.create({baseURL:e})}},{key:"server",value:function(){return e.create(d)}},{key:"create",value:function(e){var t=r.a.create({baseURL:e,withCredentials:!0});return t.interceptors.request.use((function(e){return e.headers.trace_id=s.CommonUtil.uuid(),e.headers.Authorization=l.a.state.userInfo.token,e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){if(e.data instanceof ArrayBuffer)return e;if(e.data.success)return e;var t=new Error;throw e.data.echoMessage?t.message=e.data.echoMessage:t.message=e.status+"服务器内部异常",t.response=e.data,t}),(function(e){if(!e.response)return e.message="请检查网络设置",Promise.reject(e);switch(e.response.status){case 101:break;case 401:e.message="登录已过期,请重新登录!";break;case 403:e.message="禁止访问!";break;case 503:e.message="服务器升级中!";break;case 500:e.message=e.response.data.echoMessage||"服务内部异常!";break;default:e.message="未知错误"}return Promise.reject(e)})),t}}]),e}()},9270:function(e,t,n){},a497:function(e,t,n){e.exports=n.p+"img/img_login_chatu.png"},e581:function(e,t,n){e.exports=n.p+"img/pic_logo.png"}}]);